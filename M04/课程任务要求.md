# 第四次课程：接口联调验证测试

## 项目简介

本项目基于**M03应用市场项目**，主要目标是**验证和测试前后端数据库联调功能**。

**重要说明**：本次课程不需要创建新项目，而是基于M03的代码进行联调测试和验证。

---

## 前三次课程内容回顾

### **第一次课程 (M01) - 三端初始化**

**主要目标**：完成全栈开发环境搭建

**技术栈介绍**：
- **后端**：Spring Boot 框架搭建，提供基础RESTful API
- **Web前端**：Vue 3 + Vite 单页应用框架
- **移动端**：微信小程序原生开发

**核心内容**：
1. **项目结构搭建**
   - 创建标准的Maven项目结构
   - 配置Spring Boot基础依赖
   - 搭建Vue 3项目框架
   - 初始化微信小程序项目

2. **基础配置**
   - Spring Boot配置文件（application.yml）
   - Vue项目配置文件（package.json、vite.config.js）
   - 小程序项目配置（app.json）

3. **健康检查接口**
   - 实现 `/health` 健康检查端点
   - 返回服务运行状态信息

**验收标准**：
- ✅ 三端项目结构完整，可独立运行
- ✅ 后端提供 `/health` 健康检查接口
- ✅ Web前端和小程序均可正常启动
- ✅ 项目具备完整的全栈开发基础框架

---

### **第二次课程 (M02) - 前后端联调**

**主要目标**：实现应用市场的前后端联调

**核心内容**：

1. **后端增强**：
   - 统一响应结构设计（成功/失败/异常统一返回格式）
   - 实现 `/api/apps` 接口，提供应用静态数据
   - 异常处理机制完善
   - API文档编写和接口规范

2. **前端开发**：
   - 实现移动优先的应用列表页面
   - 集成Tailwind CSS样式框架
   - 实现Mock数据和后端数据切换机制
   - 响应式设计适配移动端

3. **联调技术**：
   - Vite代理配置解决跨域问题
   - CORS直连配置
   - Axios拦截器统一响应处理和错误处理
   - 前端路由配置和状态管理

**验收标准**：
- ✅ 后端接口返回格式统一，可随时切换数据源
- ✅ 前端应用市场页面美观，支持响应式设计
- ✅ 前后端联调成功，数据正常交互
- ✅ 掌握代理和CORS两种前后端连通方式

---

### **第三次课程 (M03) - 数据持久化与容器化**

**主要目标**：引入数据库层和容器化部署

**新增内容**：

1. **数据库层**：
   - 集成MyBatis ORM框架
   - 设计应用实体类（AppEntity）
   - 创建数据访问层（Mapper接口和XML）
   - 支持完整的CRUD操作
   - 数据库连接池配置和优化

2. **容器化部署**：
   - Docker Compose配置MySQL数据库
   - 项目打包和部署说明
   - 服务器部署指南
   - 容器间网络通信配置

3. **数据库设计**：
   - 应用信息表（t_apps）结构设计
   - 索引优化和性能考虑
   - 数据初始化脚本编写

**验收标准**：
- ✅ 数据持久化功能完整，数据能正确存储和查询
- ✅ 容器化环境配置正确，所有服务能正常启动
- ✅ 项目可在服务器环境中部署运行
- ✅ 掌握Docker容器化和微服务部署技术

**技术要点**：
- MyBatis与Spring Boot集成
- Docker多容器编排
- 数据库设计和优化
- 生产环境部署配置

---

## 第四次课程任务：联调功能验证

### **任务目标**
基于M03的应用市场项目，验证和测试**智能体相关API接口**的联调功能，确保前后端数据库能正常交互。

### **核心要求**

#### **1. 接口联调测试**
- 测试M03中现有的 `/api/apps` 接口联调功能
- 验证前端应用列表页面是否正常显示数据库数据
- 确保数据来源是数据库而非Mock数据

#### **2. 代码优化（可选）**
- 可以对现有代码进行小的优化改进
- 增加一些实用的前端功能（如搜索）
- 但不需要大幅重构

### **验收标准**

**必须完成**：
- ✅ 应用列表页面能正常显示数据
- ✅ 前后端联调功能正常（数据来自数据库）
- ✅ 数据库连接和查询功能正常

**可选优化**：
- ➕ 优化UI样式
- ➕ 增加排序功能

---

## 实施步骤

### **第一步：启动环境**
```bash
# 启动所有服务（基于M03的docker-compose.yml）
docker-compose up -d

# 检查服务状态
docker-compose ps
```

### **第二步：测试联调**
1. **访问前端页面**：http://localhost:80 或 http://localhost:5173
2. **查看应用列表**：确认数据能正常显示
3. **测试接口调用**：打开浏览器开发者工具，查看网络请求

### **第三步：验证数据库**
```bash
# 连接数据库查看数据
docker-compose exec mysql mysql -u root -p agent_platform

# 查看应用数据
SELECT * FROM t_apps;

# 退出数据库
exit
```

### **第四步：优化改进**

#### 优化建议：
1. **样式优化**：美化界面显示
1. **排序功能**：添加按名称、时间排序

```

### **完成标准**
- ✅ 应用列表页面正常显示（显示数据库数据）
- ✅ 前后端联调无错误
- ✅ 能看到实际的数据库数据（非Mock数据）

---

## 任务说明

本次课程的重点是**验证和测试联调功能**，而不是重新开发。学生需要：

1. **运行现有项目**：直接使用M03的代码
2. **测试联调功能**：确保 `/api/apps` 接口能正常联调
3. **发现问题**：如果有联调问题，分析并解决
4. **优化改进**：可以进行小的功能增强

这样既能巩固前三次课程的知识，又能确保项目能真正运行起来。

### **预期成果**
通过这次课程，学生将掌握：
- 如何测试和验证前后端联调功能
- 如何排查和解决联调相关问题
- 如何对现有项目进行小的优化改进
