# Vue 3 权限管理系统作业

## 项目概述

本作业要求学生基于 Vue 3 + Element Plus 技术栈，实现一个**权限管理系统**，重点掌握用户认证、动态菜单、权限控制等核心功能。


## 核心功能要求

### 1. 用户登录功能 

#### 1.1 登录页面实现
- **页面路径**: `/`
- **必须实现**:
  - 用户名输入框
  - 密码输入框
  - 登录按钮
  - 加载状态显示
  - 错误信息提示

#### 1.2 登录逻辑
- **必须实现**:
  - 点击登录按钮向后端发送请求
  - 接收后端返回的token
  - 将token存储到localStorage
  - 登录成功后跳转到首页

- **后端接口**: `POST /api/v1/auth/login`
- **测试账号**: 
  - 管理员: `admin` / `123456`
  - 普通用户: `user` / `123456`

### 2. 动态菜单功能 

#### 2.1 首页布局
- **页面路径**: `/home`
- **必须实现**:
  - 顶部导航栏（系统标题、用户名、退出按钮）
  - 左侧菜单栏（动态生成）
  - 主内容区域

#### 2.2 动态菜单生成
- **必须实现**:
  - 页面加载时向后端请求菜单数据
  - 根据用户权限动态渲染左侧菜单
  - 不同用户看到不同的菜单项
  - 菜单点击可以跳转到对应页面

- **后端接口**: `GET /api/v1/menus`
- **权限说明**:
  - 管理员用户：可以看到所有菜单
  - 普通用户：只能看到基础菜单

### 3. 个人信息页面 

#### 3.1 个人信息展示
- **页面路径**: `/home/profile`
- **必须实现**:
  - 向后端请求个人信息
  - 展示用户基本信息（用户名、邮箱、部门等）
  - 信息以卡片形式展示

- **后端接口**: `GET /api/v1/user/profile`

### 4. 权限验证功能 

#### 4.1 无权访问处理
- **必须实现**:
  - 在个人信息页面添加一个"管理员操作"按钮
  - 普通用户点击时调用管理员接口
  - 后端返回403错误
  - 前端显示"权限不足"的错误提示

- **后端接口**: `POST /api/v1/admin/delete-user` (模拟管理员操作)

#### 4.2 路由守卫
- **必须实现**:
  - 未登录用户只能访问登录页
  - 已登录用户访问登录页自动跳转首页
  - Token失效时自动跳转登录页

## 实现要求

### 2. 项目结构
```
src/
├── pages/              # 页面组件
│   ├── Login.vue       # 登录页面
│   ├── Home.vue        # 首页布局
│   └── Profile.vue     # 个人信息页面
├── router/             # 路由配置
│   └── index.js        # 路由文件
├── utils/              # 工具函数
│   └── request.js      # HTTP请求封装
└── main.js             # 入口文件
`

## 开发提示

### 1. 项目启动
```bash
# 安装依赖
npm install

# 启动前端
npm run dev

```

### 2. 核心代码示例

#### HTTP请求封装
```javascript
// utils/request.js
const request = async (url, options = {}) => {
  const token = localStorage.getItem('token');
  const headers = {
    'Content-Type': 'application/json',
    ...(token && { 'Authorization': `Bearer ${token}` }),
    ...options.headers,
  };

  const response = await fetch(url, {
    ...options,
    headers,
  });

  if (response.status === 401) {
    localStorage.removeItem('token');
    window.location.href = '/';
    return;
  }

  return response.json();
};
```

#### 路由守卫
```javascript
// router/index.js
router.beforeEach((to, from, next) => {
  const token = localStorage.getItem('token');
  
  if (to.path === '/') {
    // 登录页面
    if (token) {
      next('/home');
    } else {
      next();
    }
  } else {
    // 其他页面需要登录
    if (token) {
      next();
    } else {
      next('/');
    }
  }
});
```

### 3. 后端接口说明

| 接口 | 方法 | 说明 | 权限 |
|------|------|------|------|
| `/api/v1/auth/login` | POST | 用户登录 | 无 |
| `/api/v1/menus` | GET | 获取菜单 | 需要token |
| `/api/v1/user/profile` | GET | 获取个人信息 | 需要token |
| `/api/v1/admin/delete-user` | POST | 管理员操作 | 仅管理员 |

## 注意事项

1. 重点掌握权限控制的实现原理
2. 理解前后端如何配合实现动态菜单
3. 代码必须能够正常运行
4. 独立完成，禁止抄袭